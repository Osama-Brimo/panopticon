{"version":3,"file":"panopticon.js","mappings":"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","sources":["webpack://panopticon/./src/game/features/saveLoad.ts","webpack://panopticon/./src/game/st/listeners.ts","webpack://panopticon/./src/game/template/classes/Entities/Area.ts","webpack://panopticon/./src/game/template/classes/Entities/Item.ts","webpack://panopticon/./src/game/template/classes/Entities/NPC.ts","webpack://panopticon/./src/game/template/classes/Entities/Player.ts","webpack://panopticon/./src/game/template/classes/Game/Flag.ts","webpack://panopticon/./src/game/template/classes/Game/State.ts","webpack://panopticon/./src/game/template/classes/Mechanics/Cycle.ts","webpack://panopticon/./src/game/template/classes/Mechanics/Inventory.ts","webpack://panopticon/./src/game/template/classes/Participants/Human.ts","webpack://panopticon/./src/game/template/instances/Area/Foyer.ts","webpack://panopticon/./src/game/template/instances/Game/Flags.ts","webpack://panopticon/./src/game/template/instances/Game/State.ts","webpack://panopticon/./src/game/template/instances/Item/Camera.ts","webpack://panopticon/./src/game/template/instances/NPC/Char.ts","webpack://panopticon/./src/game/template/instances/Player/Player.ts","webpack://panopticon/./src/st/slash-commands.ts","webpack://panopticon/./src/utils/utils.ts","webpack://panopticon/external module \"../../../../extensions.js\"","webpack://panopticon/external module \"../../../../script.js\"","webpack://panopticon/external module \"../../../../slash-commands/SlashCommand.js\"","webpack://panopticon/external module \"../../../../slash-commands/SlashCommandArgument.js\"","webpack://panopticon/external module \"../../../../slash-commands/SlashCommandEnumValue.js\"","webpack://panopticon/external module \"../../../../slash-commands/SlashCommandParser.js\"","webpack://panopticon/webpack/bootstrap","webpack://panopticon/webpack/runtime/define property getters","webpack://panopticon/webpack/runtime/hasOwnProperty shorthand","webpack://panopticon/webpack/runtime/make namespace object","webpack://panopticon/./src/index.ts"],"sourcesContent":["import { gameLog } from \"../../utils/utils\";\nimport { State } from \"../template/classes/Game/State\";\n\nexport function saveGameState(state: State) {\n    const serializedState = JSON.stringify(state);\n    gameLog('saveGameState', serializedState);\n    localStorage.setItem('panopticon_gameState', serializedState);\n}\n\nexport function loadGameState() {\n    const serializedState = localStorage.getItem('panopticon_gameState');\n    gameLog('loadGameState', serializedState);\n    return serializedState ? JSON.parse(serializedState) : null;\n}\n","import { getContext } from \"@sillytavern/extensions\";\nimport { $state } from \"../template/instances/Game/State\";\nimport { loadGameState, saveGameState } from \"../features/saveLoad\";\nimport { gameLog } from \"../../utils/utils\";\n\n\nexport function registerListeners() {\n    const context = getContext();\n\n    // Extension load\n    gameLog('loaded');\n    gameLog('Game State', $state);\n\n    // e: chatLoaded\n    context.eventSource.on('chatLoaded', async () => {\n        gameLog('chatLoaded Fired');\n    });\n    // e: game-state-save\n    context.eventSource.on('game-state-save', async() => {\n        gameLog('Request for game save');\n        saveGameState($state);\n    });\n    // e: game-state-load\n    context.eventSource.on('game-state-load', async () => {\n        gameLog('Request for game load');\n        loadGameState();\n    });\n}\n","import { Doable, Goable, Inspectable } from \"../../interfaces/Ables\";\nimport { Item } from \"./Item\";\nimport { NPC } from \"./NPC\";\n\nenum GodelType {\n  A = \"A\",\n  B = \"B\",\n}\n\nexport type ofGodelType = GodelType | null;\n\nexport type ofGodelCycle = number | null;\n\nexport class Area implements Goable {\n  name: string;\n  description: string;\n  is_godel: boolean;\n  godel_type: ofGodelType;\n  godel_cycle_num: ofGodelCycle;\n  is_locked: boolean;\n  unlocked_by?: Item[];\n  goables: Goable[];\n  inspectables: Inspectable[];\n  doables: Doable[];\n  npcs: NPC[];\n  on_go: () => {};\n  on_exit: () => {};\n  is_saferoom: boolean;\n\n  constructor(\n    name: string,\n    description: string,\n    is_godel: boolean,\n    godel_type: GodelType,\n    godel_cycle_num: number,\n    is_locked: boolean,\n    unlocked_by: Item[],\n    goables: Goable[],\n    inspectables: Inspectable[],\n    doables: Doable[],\n    npcs: NPC[],\n    on_go: () => {},\n    on_exit: () => {},\n    is_saferoom: boolean\n  ) {\n    this.name = name;\n    this.description = description;\n    this.is_godel = is_godel;\n    this.godel_type = godel_type;\n    this.godel_cycle_num = godel_cycle_num;\n    this.is_locked = is_locked;\n    this.unlocked_by = unlocked_by;\n    this.goables = goables;\n    this.inspectables = inspectables;\n    this.doables = doables;\n    this.npcs = npcs;\n    this.on_go = on_go;\n    this.on_exit = on_exit;\n    this.is_saferoom = is_saferoom;\n  }\n}\n\n// const Foyer = new Area(\n//   \"Foyer\",\n//   \"The Foyer.\",\n//   false,\n//   null,\n//   null,\n//   false,\n//   [],\n//   [],\n//   [],\n//   [],\n//   [],\n//   null,\n//   null,\n//   false,\n// );\n","import { Usable } from \"../../interfaces/Ables\";\n\nexport class Item implements Usable {\n    name: string;\n    description: string;\n    effect: string;\n    on_use: () => null;\n    item_comment: string;\n    count: number;\n\n    constructor(name: string, description: string, effect: string, on_use: () => null, item_comment: string, count: number = 0) {\n        this.name = name;\n        this.description = description;\n        this.effect = effect;\n        this.on_use = on_use;\n        this.item_comment = item_comment;\n        this.count = count;\n    }\n}\n","import { Talkable } from \"../../interfaces/Ables\";\n\n// NPC is always an AI assistant.\nexport class NPC implements Talkable {\n    description: string;\n    name: string;\n    on_talk: () => {};\n\n    constructor(name: string, description: string, on_talk: () => {}) {\n        this.name = name;\n        this.description = description;\n        this.on_talk = on_talk;\n    }\n}\n","import { Human } from \"../Participants/Human\";\n\nexport class Player extends Human {\n    constructor(name) {\n        super(name);\n    }\n}\n","export class Flag {\n    name: string;\n    value: boolean;\n\n    constructor(name: string, value: boolean) {\n        this.name = name;\n        this.value = value;\n    }\n}\n","import { User } from \"../../../../../../../../../../src/users\";\nimport { Doable, Goable, Inspectable, Talkable } from \"../../interfaces/Ables\";\nimport { CMD } from \"../CMD/CMD\";\nimport { Area } from \"../Entities/Area\";\nimport { NPC } from \"../Entities/NPC\";\nimport { Player } from \"../Entities/Player\";\nimport { Cycle } from \"../Mechanics/Cycle\";\nimport { Inventory } from \"../Mechanics/Inventory\";\nimport { GameEvent } from \"./Event\";\nimport { Flag } from \"./Flag\";\n\nexport class State {\n  user: Player;\n  char: NPC;\n  area: Area;\n  inventory: Inventory;\n  frozen_tear_count: number;\n  inspectables: Inspectable[];\n  goables: Goable[];\n  doables: Doable[];\n  talkables: Talkable[];\n  cycle: Cycle;\n  time: string;\n  flags: Flag[];\n  event_queue: GameEvent[];\n  cmd_queue: CMD[];\n  constructor(\n    user: Player,\n    char: NPC,\n    area: Area,\n    inventory: Inventory,\n    frozen_tear_count: number,\n    inspectables: Inspectable[],\n    goables: Goable[],\n    doables: Doable[],\n    talkables: Talkable[],\n    cycle: Cycle,\n    time: string,\n    flags: Flag[],\n    event_queue: GameEvent[],\n    cmd_queue: CMD[]\n  ) {\n    this.user = user;\n    this.char = char;\n    this.area = area;\n\n    this.inventory = inventory;\n    this.frozen_tear_count = frozen_tear_count;\n\n    this.inspectables = inspectables;\n    this.goables = goables;\n    this.doables = doables;\n    this.talkables = talkables;\n\n    this.cycle = cycle;\n    this.time = time;\n\n    this.flags = flags;\n\n    this.event_queue = event_queue;\n    this.cmd_queue = cmd_queue;\n  }\n\n  processCmdQueue() {\n    this.cmd_queue.forEach((Cmd) => {\n      Cmd.execute(this);\n    });\n  }\n\n  update() {\n    // If theres CMDs; process\n    // If theres GameEvents; process\n\n    this.processCmdQueue();\n    // this.processEventQueue();\n  }\n}\n","// A timeline or cycle, containing its event, number, etc.\nexport class Cycle {\n    number: number;\n    constructor(number: number) {\n        this.number = number;\n    }\n}\n","import { Item } from \"../Entities/Item\";\n\nexport class Inventory {\n    items: Item[];\n    size: number;\n    constructor(items: Item[], size: number) {\n        this.items = items;\n        this.size = size;\n    }\n}\n","// Represents the human player\nexport class Human {\n    name:string;\n    constructor(name: string) {\n        this.name = name;\n    }\n}\n","import { Area } from \"../../classes/Entities/Area\";\nimport { Event_EnterMansion } from \"../Game/Events\";\n\nexport const Area_Foyer = new Area(\n  \"Foyer\",\n  \"The Foyer.\",\n  false,\n  null,\n  null,\n  false,\n  [],\n  [],\n  [],\n  [],\n  [],\n  null,\n  null,\n  false\n);\n","import { Flag } from \"../../classes/Game/Flag\";\n\nexport const DID_FIRST_TUTORIAL = new Flag(\"FIRST_TUTORIAL\", false);\n","import { State } from \"../../classes/Game/State\";\nimport { Cycle } from \"../../classes/Mechanics/Cycle\";\nimport { Inventory } from \"../../classes/Mechanics/Inventory\";\nimport { Area_Foyer } from \"../Area/Foyer\";\nimport { Item_Camera } from \"../Item/Camera\";\nimport { $char } from \"../NPC/Char\";\nimport { $player } from \"../Player/Player\";\nimport { DID_FIRST_TUTORIAL } from \"./Flags\";\n\n\nconst startingArea = Area_Foyer;\nconst startingInventory = new Inventory([Item_Camera], 5);\nconst startingTime = \"16:31\";\nconst startingCycle = new Cycle(0);\n\nexport const $state = new State(\n  $player,\n  $char,\n  startingArea,\n  startingInventory,\n  0,\n  startingArea.inspectables,\n  startingArea.goables,\n  startingArea.doables,\n  [$char],\n  startingCycle,\n  startingTime,\n  [DID_FIRST_TUTORIAL],\n  [],\n  []\n);\n","import { Item } from \"../../classes/Entities/Item\";\n\nexport const Item_Camera = new Item(\"Camera\", \"A regular camera.\", \"It's a camera.\", () => null, \"You take a picture.\", 1);\n","import { NPC } from \"../../classes/Entities/NPC\";\n\nexport const $char = new NPC(\"char's name from ST\", \"char is... something.\", () => { console.log(\"you talked to char.\"); return null });\n","import { Player } from \"../../classes/Entities/Player\";\n\nexport const $player = new Player(\"st {{user}}\");\n","import { eventSource } from '@sillytavern/script';\nimport { SlashCommand } from '@sillytavern/slash-commands/SlashCommand';\nimport { SlashCommandArgument, ARGUMENT_TYPE, SlashCommandNamedArgument } from '@sillytavern/slash-commands/SlashCommandArgument';\nimport { SlashCommandEnumValue, enumTypes } from '@sillytavern/slash-commands/SlashCommandEnumValue';\nimport { SlashCommandParser } from '@sillytavern/slash-commands/SlashCommandParser';\n\nconst cmd_types = {\n  GO: \"GO\",\n  INSPECT: \"INSPECT\",\n  TALK: \"TALK\",\n  USE: \"USE\",\n  DO: \"DO\",\n};\n\nasync function slash_emitEvent(pipe) {\n  console.log(pipe, \"event from slash_emitEvent\");\n  await eventSource.emit(pipe);\n  return \"\";\n}\n\nasync function slash_processCMD(pipe) {\n  const { type, target } = pipe;\n\n  console.log(`TYPE:`, type);\n  console.log(`TARGET:`, target);\n\n  return \"\";\n}\n\nasync function slash_emitEvent_gameStateSave() {\n  await eventSource.emit(\"game-state-save\");\n  return \"\";\n}\n\nasync function slash_emitEvent_gameStateLoad() {\n  await eventSource.emit(\"game-state-load\");\n  return \"\";\n}\n\nexport function registerSlashCommands() {\n  // > /emit\n  SlashCommandParser.addCommandObject(\n    SlashCommand.fromProps({\n      name: \"emit\",\n      callback: slash_emitEvent,\n      aliases: [\"e\", \"event\", \"emit-event\"],\n      unnamedArgumentList: [\n        SlashCommandArgument.fromProps({\n          description: \"Name of custom event\",\n          typeList: [ARGUMENT_TYPE.STRING],\n          isRequired: true,\n        }),\n      ],\n      helpString: \"Emit a custom event.\",\n    })\n  );\n\n  // > /@cmd\n  SlashCommandParser.addCommandObject(\n    SlashCommand.fromProps({\n      name: \"@cmd\",\n      callback: slash_processCMD,\n      aliases: [\"game-cmd\"],\n      namedArgumentList: [\n        SlashCommandNamedArgument.fromProps({\n          name: \"type\",\n          description: \"Type of command\",\n          typeList: [ARGUMENT_TYPE.STRING],\n          enumList: [\n            new SlashCommandEnumValue(\n              cmd_types.GO,\n              cmd_types.GO,\n              enumTypes.enum\n            ),\n            new SlashCommandEnumValue(\n              cmd_types.INSPECT,\n              cmd_types.INSPECT,\n              enumTypes.enum\n            ),\n            new SlashCommandEnumValue(\n              cmd_types.TALK,\n              cmd_types.TALK,\n              enumTypes.enum\n            ),\n            new SlashCommandEnumValue(\n              cmd_types.USE,\n              cmd_types.USE,\n              enumTypes.enum\n            ),\n            new SlashCommandEnumValue(\n              cmd_types.DO,\n              cmd_types.DO,\n              enumTypes.enum\n            ),\n          ],\n          isRequired: true,\n        }),\n        SlashCommandNamedArgument.fromProps({\n          name: \"target\",\n          description:\n            \"Unique identifier indicating what the command is targeting.\",\n          typeList: [ARGUMENT_TYPE.STRING],\n          isRequired: true,\n        }),\n      ],\n      helpString: \"Send a request for a game command.\",\n    })\n  );\n\n  // > /@save\n  SlashCommandParser.addCommandObject(\n    SlashCommand.fromProps({\n      name: \"@save\",\n      callback: slash_emitEvent_gameStateSave,\n      aliases: [\"game-save\", \"game-state-save\"],\n      helpString:\n        \"DEV: Shorthand to emit game-state-save event, which requests to save current game state into localStorage.\",\n    })\n  );\n\n  // > /@load\n  SlashCommandParser.addCommandObject(\n    SlashCommand.fromProps({\n      name: \"@load\",\n      callback: slash_emitEvent_gameStateLoad,\n      aliases: [\"game-load\", \"game-state-load\"],\n      helpString:\n        \"DEV: Shorthand to emit game-state-load event, which requests to load current game state from localStorage.\",\n    })\n  );\n}\n","const extensionName = \"Panopticon\";\n\nexport function gameLog(label, ...args) {\n  console.log(`[${extensionName}] ${label}`, ...args);\n};\n","module.exports = __WEBPACK_EXTERNAL_MODULE__extensions_js_e625da88__;","module.exports = __WEBPACK_EXTERNAL_MODULE__script_js_c57e49fe__;","module.exports = __WEBPACK_EXTERNAL_MODULE__slash_commands_SlashCommand_js_1b0d5616__;","module.exports = __WEBPACK_EXTERNAL_MODULE__slash_commands_SlashCommandArgument_js_a42b9371__;","module.exports = __WEBPACK_EXTERNAL_MODULE__slash_commands_SlashCommandEnumValue_js_20f1c506__;","module.exports = __WEBPACK_EXTERNAL_MODULE__slash_commands_SlashCommandParser_js_42c8b851__;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import { registerListeners } from \"./game/st/listeners\";\nimport { $state } from \"./game/template/instances/Game/State\";\nimport { registerSlashCommands } from \"./st/slash-commands\";\nimport { gameLog } from \"./utils/utils\";\n\n\nregisterSlashCommands();\n\njQuery(async () => {\n    try {\n        registerListeners();\n        gameLog(\"Gamestate:\", $state);\n    } catch (error) {\n        console.error('[Panopticon] ERROR:', error);\n    }\n});\n\n// Game | state > ST | CMD > Game | state > ST...\n"],"names":[],"sourceRoot":""}